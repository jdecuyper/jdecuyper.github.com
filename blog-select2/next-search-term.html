<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <link href="../stylesheets/select2-3.5.2/select2.css" rel="stylesheet"/>
    <script type="text/javascript" src="../javascripts/select2-3.5.2/select2.js"></script>
    <title>jdecuyper.github.com by jdecuyper</title>
    
    <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-35502053-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

    </script>
  
   <script type="text/javascript">
        $(function() {
            var opts = $("#source").html();
            var opts2 = "<option></option>"+opts;
            
            $("select.populate").each(function() { 
                var e = $(this); 
                e.html(e.hasClass("placeholder")?opts2:opts); 
            });
        });

        $(document).ready(function () {
        
            function displaySelectedVal(selectedObject, currentSearchTerm) {
                return selectedObject.text;
            }
            
            function displayCurrentSearchTerm(selectedObject, currentSearchTerm) {
                return currentSearchTerm;
            }
            
            $("#m1").select2({
                nextSearchTerm: displaySelectedVal,
            });
            
            $("#m2").select2({
                nextSearchTerm: displayCurrentSearchTerm,
            });
        });
    </script>
    
  </head>

  <body>

    <h3>Next Search Term</h3>
    
    <p>Select2 is a great alternative for the standard select box (check it out: <a target="_blank" href="https://github.com/ivaynberg/select2">Select2</a>).</p>
    
    <p>I worked on a project that required a specific behavior to be added to Select2.<br />I needed a way to display the currently selected value inside the search box in order to avoid having the user type it in again over and over again.<br />My plan was to add several Select2 on the same web page containing up to 10.000 options each and I wanted a way to have the current selected value available for edit and easy copy/pasting to the user.</p>
    
    <p>So I added a helper method to support this functionality which was pulled into the Select2's 3.5.2 stable build (search for <i>nextSearchTerm</i> on the <a href="http://select2.github.io/select2/">documentation</a> page.</p>
    
    <p>Following examples show you how to display the currently selected value and the current search term. View the page source to review the JavaScript code.</p>

    <h3>Display selected value</h3>
    <div>
    <select name="m1" id="m1" style="width:500px" class="populate"></select>&nbsp;&nbsp;
    </div>
    
    <h3>Display current search term</h3>
    <div>
    <select name="m2" id="m2" style="width:500px" class="populate"></select>&nbsp;&nbsp;
    </div>    

    <select style="width:300px;display:none;" id="source">
       <optgroup label="Alaskan/Hawaiian Time Zone">
           <option value="AK">Alaska</option>
           <option value="HI">Hawaii</option>
       </optgroup>
       <optgroup label="Pacific Time Zone">
           <option value="CA">California</option>
           <option value="NV">Nevada</option>
           <option value="OR">Oregon</option>
           <option value="WA">Washington</option>
       </optgroup>
       <optgroup label="Mountain Time Zone">
           <option value="AZ">Arizona</option>
           <option value="CO">Colorado</option>
           <option value="ID">Idaho</option>
           <option value="MT">Montana</option><option value="NE">Nebraska</option>
           <option value="NM">New Mexico</option>
           <option value="ND">North Dakota</option>
           <option value="UT">Utah</option>
           <option value="WY">Wyoming</option>
       </optgroup>
       <optgroup label="Central Time Zone">
           <option value="AL">Alabama</option>
           <option value="AR">Arkansas</option>
           <option value="IL">Illinois</option>
           <option value="IA">Iowa</option>
           <option value="KS">Kansas</option>
           <option value="KY">Kentucky</option>
           <option value="LA">Louisiana</option>
           <option value="MN">Minnesota</option>
           <option value="MS">Mississippi</option>
           <option value="MO">Missouri</option>
           <option value="OK">Oklahoma</option>
           <option value="SD">South Dakota</option>
           <option value="TX">Texas</option>
           <option value="TN">Tennessee</option>
           <option value="WI">Wisconsin</option>
       </optgroup>
       <optgroup label="Eastern Time Zone">
           <option value="CT">Connecticut</option>
           <option value="DE">Delaware</option>
           <option value="FL">Florida</option>
           <option value="GA">Georgia</option>
           <option value="IN">Indiana</option>
           <option value="ME">Maine</option>
           <option value="MD">Maryland</option>
           <option value="MA">Massachusetts</option>
           <option value="MI">Michigan</option>
           <option value="NH">New Hampshire</option><option value="NJ">New Jersey</option>
           <option value="NY">New York</option>
           <option value="NC">North Carolina</option>
           <option value="OH">Ohio</option>
           <option value="PA">Pennsylvania</option><option value="RI">Rhode Island</option><option value="SC">South Carolina</option>
           <option value="VT">Vermont</option><option value="VA">Virginia</option>
           <option value="WV">West Virginia</option>
       </optgroup>
     </select>
      
      <p>PS: If you are using a more recent version of Select2 (and you should), you probably don't need this helper method anymore, you can accomplish the same behavior using its built-in features.</p>
    
  </body>
</html>